---
category: Components
group:
  title: Tools
  order: 5
title: useXChat
description: Work with agent hook for data management.
cover: https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*pJrtTaf-bWAAAAAAAAAAAAAADgCCAQ/original
coverDark: https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*6ySvTqb7XhkAAAAAAAAAAAAADgCCAQ/original
demo:
  cols: 1
---

## When To Use

Use Agent to manage conversation data and produce data for page rendering.

## Examples

<!-- prettier-ignore -->
<code src="./demo/basic.tsx">Basic</code>
<code src="./demo/stream.tsx">Streaming</code>
<code src="./demo/stream-cancel.tsx">Interrupt the output</code>
<code src="./demo/suggestions.tsx">Multiple Suggestion</code>

## API

## API

```tsx | pure
type useXChat<AgentMessage, ParsedMessage = AgentMessage> = (
  config: XChatConfig<AgentMessage, ParsedMessage>,
) => XChatConfigReturnType;
```

### XChatConfig

| Property | Description | Type | Default | Version |
| --- | --- | --- | --- | --- |
| agent | `agent` parameter is required when using the `onRequest` method in an agent generated by `useXAgent`. | XAgent | - |  |
| defaultMessages | default messages | { status, message }[] | - |  |
| parser | Convert AgentMessage to ParsedMessage for consumption. If not set, AgentMessage will be consumed directly. Supports converting one AgentMessage to multiple ParsedMessages | (message: AgentMessage) => BubbleMessage \| BubbleMessage[] | - |  |
| requestFallback | Fallback when request fails, not provided will not be displayed | AgentMessage \| () => AgentMessage | - |  |
| requestPlaceholder | Show the placeholder information when requesting, not provided will not be displayed | AgentMessage \| () => AgentMessage | - |  |

### XChatConfigReturnType

| Property | Description | Type | Version |
| --- | --- | --- | --- |
| messages | Current managed messages content | AgentMessages[] |  |
| parsedMessages | Parsed messages by `parser` api | ParsedMessages[] |  |
| onRequest | Create a message and trigger a request | (message) => void |  |
| setMessages | Modify messages directly without triggering requests | (messages: { message, status }[]) => void |  |
